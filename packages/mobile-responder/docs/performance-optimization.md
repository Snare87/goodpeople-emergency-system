# 웹-앱 연동 속도 개선 가이드

## 구현된 개선사항

### 1. Webpack 경고 해결
- `@craco/craco` 패키지 추가로 webpack 설정 커스터마이징
- deprecated 경고 완전 제거

### 2. Firebase 연결 최적화

#### 앱 (Flutter)
- `FirebaseOptimizationService` 추가
- 연결 상태 모니터링 및 자동 재연결
- 강제 동기화 기능
- 서버 시간 오프셋 처리

#### 웹 (React)
- `firebaseOptimization.js` 서비스 추가
- 페이지 가시성 변경 시 연결 관리
- 지수 백오프를 통한 재연결 전략
- 백그라운드/포그라운드 전환 시 즉시 동기화

### 3. 성능 개선 전략

#### 즉시 적용 가능한 개선사항:
1. **Firebase 우선순위 설정**: 중요한 데이터에 높은 우선순위 부여
2. **연결 상태 모니터링**: 연결 끊김 시 즉시 재연결
3. **강제 동기화**: 필요시 수동으로 데이터 동기화
4. **페이지 가시성 처리**: 백그라운드에서 불필요한 연결 방지

#### 추가 개선 제안:
1. **데이터 압축**: gzip 압축으로 데이터 전송량 감소
2. **필드 최적화**: 긴 필드명을 짧게 변경
3. **배치 업데이트**: 여러 업데이트를 한 번에 처리
4. **로컬 캐싱**: 자주 사용하는 데이터 로컬 저장

## 설치 및 실행

### 웹 대시보드
```bash
cd packages/web-dashboard
npm install @craco/craco
npm start
```

### 모바일 앱
```bash
cd packages/mobile-responder
flutter pub get
flutter run
```

## 동기화 속도 측정

### 측정 방법:
1. 웹에서 재난 호출하기 클릭
2. 앱에서 재난 목록에 나타나는 시간 측정
3. 평균 응답 시간: 
   - 개선 전: 2-5초
   - 개선 후 목표: 0.5-1초

### 모니터링:
- Firebase 콘솔에서 실시간 데이터베이스 사용량 확인
- 네트워크 탭에서 요청/응답 시간 측정
- 콘솔 로그로 연결 상태 확인

## 트러블슈팅

### 연결이 느린 경우:
1. Firebase 서버 위치 확인 (asia-southeast1)
2. 네트워크 상태 확인
3. 강제 동기화 실행
4. 캐시 삭제 후 재시작

### 데이터가 동기화되지 않는 경우:
1. Firebase 규칙 확인
2. 인증 상태 확인
3. 연결 상태 로그 확인
4. 오프라인 모드 해제
